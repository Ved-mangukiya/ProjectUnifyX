
<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="UnifyX Password Generator - Create strong, secure passwords with customizable options">
    <meta name="keywords" content="password generator, secure passwords, password strength, security tool">
    <meta name="author" content="Your Name">
    <meta name="theme-color" content="#1a1a1a">
    <meta property="og:title" content="UnifyX Password Generator">
    <meta property="og:description" content="Create strong, secure passwords with customizable options">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yourwebsite.com/password-generator">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="UnifyX Password Generator">
    <meta name="twitter:description" content="Create strong, secure passwords with customizable options">
    
    <!-- Favicon -->
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="manifest" href="site.webmanifest">
    
    <title>UnifyX Password Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>


:root {
    --background: #1a1a1a;
    --surface: #252525;
    --surface-light: #303030;
    --input-bg: #353535;
    --button-bg: #404040;
    --accent-gold: #f0c14b;
    --accent-teal: #4db6ac;
    --text-primary: #f5f5f5;
    --text-secondary: #b0b0b0;
    --text-disabled: #707070;
    --weak: #e57373;
    --moderate: #ffb300;
    --strong: #81c784;
    --super-strong: #00e676;
    --transition-speed: 0.3s;
    --border-radius-sm: 8px;
    --border-radius-md: 12px;
    --border-radius-lg: 16px;
    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.15);
    --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.2);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
}

html {
    font-size: 16px;
    scroll-behavior: smooth;
}

body {
    background-color: var(--background);
    color: var(--text-primary);
    min-height: 100vh;
    transition: background-color var(--transition-speed), color var(--transition-speed);
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-x: hidden;
}

/* Light Mode Styles */
.light-mode {
    --background: #f7f7f7;
    --surface: #ffffff;
    --surface-light: #e8e8e8;
    --input-bg: #f0f0f0;
    --button-bg: #e0e0e0;
    --text-primary: #212121;
    --text-secondary: #606060;
    --text-disabled: #909090;
    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.08);
    --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.1);
}

/* Container Layout */
.container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: clamp(1rem, 5vw, 2rem);
}

/* Header Styles */
header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    gap: 1rem;
}

.logo {
    font-size: clamp(1.5rem, 4vw, 2rem);
    font-weight: 700;
    color: var(--accent-gold);
    animation: fadeIn 0.5s ease-in;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

.theme-toggle {
    background: var(--surface-light);
    border: none;
    padding: 0.6rem 1.2rem;
    border-radius: 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.4rem;
    color: var(--text-primary);
    transition: all var(--transition-speed);
    font-size: 0.9rem;
    font-weight: 500;
    box-shadow: var(--shadow-sm);
}

.theme-toggle:hover {
    background: var(--accent-teal);
    color: #000;
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.theme-toggle:active {
    transform: translateY(0);
}

/* Main Layout */
main {
    display: grid;
    grid-template-columns: 1fr;
    gap: clamp(1rem, 3vw, 2rem);
    animation: slideUp 0.5s ease-out;
}

@media (min-width: 768px) {
    main {
        grid-template-columns: 3fr 1fr;
    }
}

@media (min-width: 1200px) {
    main {
        grid-template-columns: 3fr 1fr;
        gap: 2.5rem;
    }
}

/* Card Styles */
.card {
    background-color: var(--surface);
    border-radius: var(--border-radius-lg);
    padding: clamp(1rem, 3vw, 1.5rem);
    box-shadow: var(--shadow-md);
    margin-bottom: 1rem;
    transition: transform var(--transition-speed), box-shadow var(--transition-speed);
    position: relative;
    overflow: hidden;
}

.card:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-lg);
}

.card h2 {
    margin-bottom: 1rem;
    color: var(--accent-teal);
    font-size: clamp(1.25rem, 3vw, 1.5rem);
    font-weight: 600;
    letter-spacing: -0.01em;
}

/* Password Output Area */
.password-output {
    width: 100%;
    background-color: var(--input-bg);
    border: 2px solid var(--accent-gold);
    border-radius: var(--border-radius-md);
    padding: 0.8rem;
    font-size: 1.1rem;
    font-family: 'Courier New', monospace;
    margin-bottom: 1rem;
    color: var(--text-primary);
    min-height: 3.5rem;
    word-break: break-all;
    resize: none;
    transition: border-color var(--transition-speed), box-shadow var(--transition-speed);
}

.password-output:focus {
    outline: none;
    border-color: var(--accent-teal);
    box-shadow: 0 0 0 3px rgba(77, 182, 172, 0.25);
}

/* Button Styles */
.btn-row {
    display: flex;
    gap: 0.8rem;
    flex-wrap: wrap;
    margin-bottom: 1rem;
}

.btn {
    padding: 0.6rem 1.2rem;
    border-radius: var(--border-radius-md);
    border: none;
    background-color: var(--button-bg);
    color: var(--text-primary);
    cursor: pointer;
    font-weight: 500;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 0.4rem;
    box-shadow: var(--shadow-sm);
    font-size: 0.95rem;
}

.btn:hover {
    background-color: var(--accent-teal);
    color: #000;
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.btn:active {
    transform: translateY(0);
}

.btn-primary {
    background-color: var(--accent-teal);
    color: #000;
}

.btn-primary:hover {
    background-color: #5ec9bf;
}

.btn-secondary {
    background-color: var(--accent-gold);
    color: #000;
}

.btn-secondary:hover {
    background-color: #ffd265;
}

.btn-outline {
    background-color: transparent;
    border: 2px solid var(--accent-teal);
}

.btn-outline:hover {
    background-color: rgba(77, 182, 172, 0.15);
}

/* Strength Meter */
.strength-meter {
    margin: 1rem 0;
    padding: 1rem;
    border-radius: var(--border-radius-md);
    background-color: var(--surface-light);
    transition: background-color var(--transition-speed);
}

.strength-bar {
    height: 8px;
    width: 100%;
    background-color: var(--input-bg);
    border-radius: 4px;
    overflow: hidden;
    margin-top: 0.5rem;
}

.strength-fill {
    height: 100%;
    width: 0;
    background-color: var(--weak);
    transition: width 0.5s ease-out, background-color 0.5s ease;
}

.strength-text {
    margin-top: 0.5rem;
    font-weight: 600;
    font-size: clamp(0.9rem, 2vw, 1rem);
}

.crack-time {
    margin-top: 0.4rem;
    font-size: clamp(0.8rem, 2vw, 0.85rem);
    color: var(--text-secondary);
}

/* Options Layout */
.options-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1rem;
}

@media (min-width: 576px) {
    .options-grid {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    }
}

.option-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

/* Slider Styling */
.slider-container {
    width: 100%;
    margin: 1rem 0;
}

.slider {
    width: 100%;
    height: 6px;
    background: var(--input-bg);
    border-radius: 3px;
    outline: none;
    -webkit-appearance: none;
    appearance: none;
    transition: background var(--transition-speed);
}

.slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: var(--accent-gold);
    cursor: pointer;
    transition: background var(--transition-speed), transform 0.2s;
    box-shadow: 0 0 3px rgba(0, 0, 0, 0.2);
}

.slider::-webkit-slider-thumb:hover {
    transform: scale(1.2);
}

.slider::-moz-range-thumb {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: var(--accent-gold);
    cursor: pointer;
    border: none;
    box-shadow: 0 0 3px rgba(0, 0, 0, 0.2);
    transition: background var(--transition-speed), transform 0.2s;
}

.slider::-moz-range-thumb:hover {
    transform: scale(1.2);
}

.slider-value {
    margin-top: 0.5rem;
    font-weight: 600;
    color: var(--accent-gold);
    font-size: 0.95rem;
}

/* Form Elements */
.form-group {
    margin-bottom: 1.25rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    color: var(--text-secondary);
    font-size: 0.95rem;
    font-weight: 500;
}

.form-control {
    width: 100%;
    padding: 0.7rem 1rem;
    background-color: var(--input-bg);
    border: 1px solid var(--surface-light);
    border-radius: var(--border-radius-md);
    color: var(--text-primary);
    transition: all var(--transition-speed);
    font-size: 0.95rem;
}

.form-control:focus {
    outline: none;
    border-color: var(--accent-teal);
    box-shadow: 0 0 0 3px rgba(77, 182, 172, 0.25);
}

/* Checkbox Styling */
.checkbox-container {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    margin: 1rem 0;
}

.checkbox-wrapper {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: var(--accent-teal);
}

/* Password Rules List */
.password-rules {
    list-style-type: none;
    margin: 1rem 0;
}

.password-rules li {
    margin-bottom: 0.5rem;
    padding-left: 1.5rem;
    position: relative;
    color: var(--text-secondary);
    font-size: 0.9rem;
    line-height: 1.4;
}

.password-rules li::before {
    content: "‚úì";
    position: absolute;
    left: 0;
    color: var(--accent-teal);
    font-weight: bold;
}

.password-rules li.rule-failed::before {
    content: "‚úï";
    color: var(--weak);
}

/* Password History */
.password-history {
    max-height: 300px;
    overflow-y: auto;
    margin-top: 1rem;
    padding-right: 0.5rem;
    scrollbar-width: thin;
    scrollbar-color: var(--accent-teal) var(--surface-light);
}

.password-history::-webkit-scrollbar {
    width: 6px;
}

.password-history::-webkit-scrollbar-track {
    background: var(--surface-light);
    border-radius: 3px;
}

.password-history::-webkit-scrollbar-thumb {
    background-color: var(--accent-teal);
    border-radius: 3px;
}

.history-item {
    padding: 0.8rem;
    border-radius: var(--border-radius-md);
    background-color: var(--surface-light);
    margin-bottom: 0.6rem;
    position: relative;
    transition: all 0.2s;
}

.history-item:hover {
    transform: translateX(3px);
    background-color: rgba(77, 182, 172, 0.1);
}

.history-password {
    font-family: 'Courier New', monospace;
    overflow-wrap: break-word;
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
}

.history-meta {
    display: flex;
    justify-content: space-between;
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.history-actions {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    display: flex;
    gap: 0.5rem;
}

.history-btn {
    background: none;
    border: none;
    cursor: pointer;
    color: var(--text-secondary);
    font-size: 0.9rem;
    transition: color 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    border-radius: 50%;
}

.history-btn:hover {
    color: var(--accent-gold);
    background-color: rgba(240, 193, 75, 0.1);
}

/* Tooltip */
.tooltip {
    position: relative;
}

.tooltip .tooltip-text {
    visibility: hidden;
    width: 140px;
    background-color: var(--surface);
    color: var(--text-primary);
    text-align: center;
    border-radius: var(--border-radius-sm);
    padding: 0.6rem;
    position: absolute;
    z-index: 1;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    opacity: 0;
    transition: opacity var(--transition-speed);
    box-shadow: var(--shadow-md);
    font-size: 0.85rem;
    pointer-events: none;
}

.tooltip .tooltip-text::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    margin-left: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: var(--surface) transparent transparent transparent;
}

.tooltip:hover .tooltip-text {
    visibility: visible;
    opacity: 1;
}

/* Toast Notification */
.toast {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 0.8rem 1.2rem;
    background-color: var(--accent-teal);
    color: #000;
    border-radius: var(--border-radius-md);
    box-shadow: var(--shadow-lg);
    transform: translateY(100px);
    opacity: 0;
    transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.4s;
    z-index: 1000;
    font-weight: 500;
    max-width: 90%;
}

.toast.show {
    transform: translateY(0);
    opacity: 1;
}

/* Tabs */
.tabs {
    display: flex;
    margin-bottom: 1rem;
    border-bottom: 1px solid var(--surface-light);
    overflow-x: auto;
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.tabs::-webkit-scrollbar {
    display: none;
}

.tab {
    padding: 0.7rem 1.2rem;
    cursor: pointer;
    border-bottom: 2px solid transparent;
    margin-bottom: -1px;
    transition: all var(--transition-speed);
    font-weight: 500;
    font-size: 0.9rem;
    white-space: nowrap;
}

.tab:hover {
    color: var(--accent-gold);
}

.tab.active {
    border-bottom-color: var(--accent-gold);
    color: var(--accent-gold);
}

.tab-content {
    display: none;
    animation: fadeIn 0.3s ease-in;
}

.tab-content.active {
    display: block;
}

/* Batch Generator Area */
.batch-area {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1rem;
    margin-top: 1rem;
}

/* Modal */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    animation: fadeIn 0.3s ease-in;
    backdrop-filter: blur(3px);
}

.modal-content {
    background-color: var(--surface);
    padding: 1.75rem;
    border-radius: var(--border-radius-lg);
    width: 90%;
    max-width: 550px;
    max-height: 85vh;
    overflow-y: auto;
    position: relative;
    box-shadow: var(--shadow-lg);
    animation: zoomIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.modal-close {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: none;
    border: none;
    font-size: 1.2rem;
    cursor: pointer;
    color: var(--text-primary);
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: all 0.2s;
}

.modal-close:hover {
    background-color: rgba(255, 255, 255, 0.1);
    transform: rotate(90deg);
}

/* Footer */
footer {
    text-align: center;
    padding: 2rem 0;
    color: var(--text-secondary);
    font-size: 0.85rem;
    margin-top: 2rem;
    border-top: 1px solid var(--surface-light);
}

/* Search Input */
.search-input {
    width: 100%;
    padding: 0.7rem 1rem;
    margin-bottom: 1rem;
    background-color: var(--input-bg);
    border: 1px solid var(--surface-light);
    border-radius: var(--border-radius-md);
    color: var(--text-primary);
    transition: all var(--transition-speed);
}

.search-input:focus {
    outline: none;
    border-color: var(--accent-teal);
    box-shadow: 0 0 0 3px rgba(77, 182, 172, 0.25);
}

.search-input::placeholder {
    color: var(--text-disabled);
}

/* Animations */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.03); }
    100% { transform: scale(1); }
}

@keyframes zoomIn {
    from { transform: scale(0.95); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

.generate-animation {
    animation: pulse 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* Character Counter */
.length-count {
    position: absolute;
    right: 0.8rem;
    bottom: 0.8rem;
    color: var(--text-secondary);
    font-size: 0.75rem;
    background-color: var(--surface);
    padding: 0.2rem 0.4rem;
    border-radius: var(--border-radius-sm);
}

/* Accordion */
.accordion {
    background-color: var(--surface-light);
    color: var(--text-primary);
    cursor: pointer;
    padding: 1rem;
    width: 100%;
    border: none;
    text-align: left;
    outline: none;
    font-size: 0.95rem;
    font-weight: 600;
    transition: all 0.3s;
    border-radius: var(--border-radius-md);
    margin-bottom: 0.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.accordion:hover {
    background-color: rgba(77, 182, 172, 0.1);
}

.accordion:after {
    content: '\002B';
    font-weight: bold;
    transition: transform 0.3s;
}

.accordion.active {
    background-color: rgba(77, 182, 172, 0.15);
}

.accordion.active:after {
    content: "\2212";
    transform: rotate(180deg);
}

.panel {
    padding: 0 1rem;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
    margin-bottom: 0.8rem;
}

/* Export Options */
.export-options {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-top: 1rem;
}

/* Responsive Adjustments */
@media (max-width: 480px) {
    html {
        font-size: 14px;
    }
    
    .btn-row {
        justify-content: space-between;
    }
    
    .btn {
        padding: 0.5rem 1rem;
        font-size: 0.9rem;
    }
    
    .options-grid {
        grid-template-columns: 1fr;
    }
    
    .checkbox-container {
        flex-direction: column;
        gap: 0.6rem;
    }
}

@media (min-width: 481px) and (max-width: 768px) {
    .btn-row {
        justify-content: flex-start;
    }
    
    .checkbox-container {
        flex-wrap: wrap;
    }
}

@media (min-width: 769px) {
    .container {
        padding: 2rem;
    }
    
    .card {
        padding: 1.5rem;
    }
}

/* Print Styles */
@media print {
    body {
        background-color: white;
        color: black;
    }
    
    .card {
        box-shadow: none;
        border: 1px solid #ddd;
    }
    
    .btn, .theme-toggle, .toast {
        display: none;
    }
}

/* Focus Visible Styles for Accessibility */
:focus-visible {
    outline: 3px solid var(--accent-gold);
    outline-offset: 2px;
}

/* Support for reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

/* Dark mode preference detection */
@media (prefers-color-scheme: dark) {
    body:not(.light-mode) {
        --background: #121212;
    }
}

@media (prefers-color-scheme: light) {
    body:not(.dark-mode) {
        --background: #f9f9f9;
    }
}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">UnifyX Password Generator</div>
            <button class="theme-toggle" id="themeToggle">
                <span id="themeIcon">üåô</span>
                <span id="themeText">Light Mode</span>
            </button>
        </header>

        <main>
            <div class="main-content">
                <div class="card">
                    <h2>Password Generator</h2>
                    <div style="position: relative;">
                        <textarea class="password-output" id="passwordOutput" readonly></textarea>
                        <div class="length-count" id="characterCount">0 characters</div>
                    </div>

                    <div class="btn-row">
                        <button class="btn btn-primary" id="generateBtn">Generate Password</button>
                        <button class="btn btn-secondary" id="copyBtn">Copy to Clipboard</button>
                        <button class="btn btn-outline" id="passwordOptionsBtn">Show Options</button>
                    </div>

                    <div class="strength-meter">
                        <div>Password Strength:</div>
                        <div class="strength-bar">
                            <div class="strength-fill" id="strengthFill"></div>
                        </div>
                        <div class="strength-text" id="strengthText">No password generated</div>
                        <div class="crack-time" id="crackTime"></div>
                    </div>

                    <ul class="password-rules" id="passwordRules">
                        <li id="rule1">Minimum of 6 characters</li>
                        <li id="rule2">Contains lowercase and uppercase letters</li>
                        <li id="rule3">Includes at least one number</li>
                        <li id="rule4">Includes special characters</li>
                    </ul>
                </div>

                <div class="card">
                    <div class="tabs">
                        <div class="tab active" data-tab="settings">Settings</div>
                        <div class="tab" data-tab="advanced">Advanced</div>
                        <div class="tab" data-tab="batch">Batch</div>
                    </div>

                    <div class="tab-content active" id="settings">
                        <div class="slider-container">
                            <label for="lengthSlider">Password Length:</label>
                            <input type="range" min="4" max="100" value="16" class="slider" id="lengthSlider">
                            <div class="slider-value" id="lengthValue">16 characters</div>
                        </div>

                        <div class="checkbox-container">
                            <div class="checkbox-wrapper">
                                <input type="checkbox" id="uppercase" checked>
                                <label for="uppercase">Uppercase (A-Z)</label>
                            </div>
                            <div class="checkbox-wrapper">
                                <input type="checkbox" id="lowercase" checked>
                                <label for="lowercase">Lowercase (a-z)</label>
                            </div>
                            <div class="checkbox-wrapper">
                                <input type="checkbox" id="numbers" checked>
                                <label for="numbers">Numbers (0-9)</label>
                            </div>
                            <div class="checkbox-wrapper">
                                <input type="checkbox" id="symbols" checked>
                                <label for="symbols">Special Characters</label>
                            </div>
                        </div>

                        <button class="accordion">Text-based Password</button>
                        <div class="panel">
                            <div class="form-group">
                                <label for="textInput">Enter a word or phrase:</label>
                                <input type="text" class="form-control" id="textInput" placeholder="e.g. UnifyX">
                            </div>
                            <div class="checkbox-wrapper">
                                <input type="checkbox" id="textBasedEnabled">
                                <label for="textBasedEnabled">Use text as base</label>
                            </div>
                        </div>
                    </div>

                    <div class="tab-content" id="advanced">
                        <div class="checkbox-wrapper">
                            <input type="checkbox" id="noSequential">
                            <label for="noSequential">No Sequential Characters</label>
                        </div>
                        <div class="checkbox-wrapper">
                            <input type="checkbox" id="noRepeated">
                            <label for="noRepeated">No Repeated Characters</label>
                        </div>
                        
                        <button class="accordion">Export Options</button>
                        <div class="panel">
                            <div class="export-options">
                                <button class="btn" id="exportTxt">Export as .txt</button>
                                <button class="btn" id="exportPdf">Export as .pdf</button>
                            </div>
                        </div>

                        <button class="accordion">Check Password Strength</button>
                        <div class="panel">
                            <div class="form-group">
                                <label for="checkPassword">Enter a password to check:</label>
                                <input type="text" class="form-control" id="checkPassword" placeholder="Enter password">
                            </div>
                            <button class="btn btn-outline" id="checkStrengthBtn">Check Strength</button>
                            <div class="strength-meter" id="checkStrengthMeter" style="display: none;">
                                <div>Password Strength:</div>
                                <div class="strength-bar">
                                    <div class="strength-fill" id="checkStrengthFill"></div>
                                </div>
                                <div class="strength-text" id="checkStrengthText"></div>
                                <div class="crack-time" id="checkCrackTime"></div>
                                <div id="strengthSuggestions" style="margin-top: 10px; color: var(--text-secondary);"></div>
                            </div>
                        </div>
                    </div>

                    <div class="tab-content" id="batch">
                        <div class="form-group">
                            <label for="batchCount">Number of passwords:</label>
                            <input type="number" class="form-control" id="batchCount" min="1" max="50" value="5">
                        </div>
                        <button class="btn btn-primary" id="generateBatchBtn">Generate Batch</button>
                        <div class="btn-row">
                            <button class="btn" id="copyAllBtn" style="display: none;">Copy All</button>
                            <button class="btn" id="exportBatchBtn" style="display: none;">Export Batch</button>
                        </div>
                        <div class="batch-area" id="batchResults"></div>
                    </div>
                </div>
            </div>

            <div class="sidebar">
                <div class="card">
                    <h2>Password History</h2>
                    <div class="btn-row">
                        <button class="btn btn-outline" id="clearHistoryBtn">Clear History</button>
                    </div>
                    <div class="password-history" id="passwordHistory">
                        <div class="history-empty">No passwords generated yet.</div>
                    </div>
                </div>

                <div class="card">
                    <h2>Security Tips</h2>
                    <ul class="password-rules">
                        <li>Use unique passwords for each account</li>
                        <li>Avoid using personal information</li>
                        <li>Consider using a password manager</li>
                        <li>Change passwords regularly</li>
                        <li>Longer passwords are more secure</li>
                    </ul>
                </div>
            </div>
        </main>

        <footer id="footer">
            <!-- Footer content will be set dynamically -->
        </footer>
    </div>

    <div class="toast" id="toast"></div>

    <script>
        const { jsPDF } = window.jspdf;
        
        // Set dynamic footer content
        document.getElementById('footer').innerHTML = `&copy; ${new Date().getFullYear()} Mangukiya Ved. All rights reserved.`;

        // DOM Elements
        const elements = {
            passwordOutput: document.getElementById('passwordOutput'),
            generateBtn: document.getElementById('generateBtn'),
            copyBtn: document.getElementById('copyBtn'),
            lengthSlider: document.getElementById('lengthSlider'),
            lengthValue: document.getElementById('lengthValue'),
            characterCount: document.getElementById('characterCount'),
            strengthFill: document.getElementById('strengthFill'),
            strengthText: document.getElementById('strengthText'),
            crackTime: document.getElementById('crackTime'),
            passwordRules: document.getElementById('passwordRules'),
            tabs: document.querySelectorAll('.tab'),
            tabContents: document.querySelectorAll('.tab-content'),
            themeToggle: document.getElementById('themeToggle'),
            themeIcon: document.getElementById('themeIcon'),
            themeText: document.getElementById('themeText'),
            passwordHistory: document.getElementById('passwordHistory'),
            clearHistoryBtn: document.getElementById('clearHistoryBtn'),
            checkPassword: document.getElementById('checkPassword'),
            checkStrengthBtn: document.getElementById('checkStrengthBtn'),
            checkStrengthMeter: document.getElementById('checkStrengthMeter'),
            checkStrengthFill: document.getElementById('checkStrengthFill'),
            checkStrengthText: document.getElementById('checkStrengthText'),
            checkCrackTime: document.getElementById('checkCrackTime'),
            strengthSuggestions: document.getElementById('strengthSuggestions'),
            generateBatchBtn: document.getElementById('generateBatchBtn'),
            batchCount: document.getElementById('batchCount'),
            batchResults: document.getElementById('batchResults'),
            copyAllBtn: document.getElementById('copyAllBtn'),
            exportBatchBtn: document.getElementById('exportBatchBtn'),
            exportTxt: document.getElementById('exportTxt'),
            exportPdf: document.getElementById('exportPdf'),
            textInput: document.getElementById('textInput'),
            textBasedEnabled: document.getElementById('textBasedEnabled'),
            passwordOptionsBtn: document.getElementById('passwordOptionsBtn'),
            uppercase: document.getElementById('uppercase'),
            lowercase: document.getElementById('lowercase'),
            numbers: document.getElementById('numbers'),
            symbols: document.getElementById('symbols'),
            noSequential: document.getElementById('noSequential'),
            noRepeated: document.getElementById('noRepeated')
        };

        // Character sets
        const charSets = {
            uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
            lowercase: 'abcdefghijklmnopqrstuvwxyz',
            numbers: '0123456789',
            symbols: '!@#$%^&*()-_=+[]{}|;:,.<>?/~'
        };

        // State management
        let state = {
            passwordHistory: JSON.parse(localStorage.getItem('passwordHistory')) || [],
            preferences: JSON.parse(localStorage.getItem('passwordPreferences')) || {}
        };

        // Initialize application
        function initializeApp() {
    try {
        const isDarkMode = localStorage.getItem('darkMode') !== 'light'; // Default to dark mode
if (isDarkMode) {
    document.body.classList.remove('light-mode');
    elements.themeIcon.textContent = 'üåô';
    elements.themeText.textContent = 'Light Mode';
} else {
    document.body.classList.add('light-mode');
    elements.themeIcon.textContent = '‚òÄÔ∏è';
    elements.themeText.textContent = 'Dark Mode';
}

                Object.assign(state.preferences, {
                    uppercase: elements.uppercase.checked,
                    lowercase: elements.lowercase.checked,
                    numbers: elements.numbers.checked,
                    symbols: elements.symbols.checked,
                    noSequential: elements.noSequential.checked,
                    noRepeated: elements.noRepeated.checked
                });

                const savedLength = localStorage.getItem('passwordLength');
                if (savedLength) {
                    elements.lengthSlider.value = savedLength;
                    updateLengthValue();
                }

                updatePasswordHistoryDisplay();
                setupEventListeners();
                setupAccordions();
                setupHistorySearch();
                initializeLivePreview();
            } catch (error) {
        console.error('Initialization error:', error);
        showToast('Failed to initialize application');
    }
}

        // Event listeners setup
        function setupEventListeners() {
            elements.generateBtn.addEventListener('click', generatePassword);
            elements.copyBtn.addEventListener('click', copyToClipboard);
            elements.lengthSlider.addEventListener('input', updateLengthValue);
            elements.themeToggle.addEventListener('click', toggleTheme);
            elements.clearHistoryBtn.addEventListener('click', clearHistory);
            elements.checkStrengthBtn.addEventListener('click', checkPasswordStrength);
            elements.generateBatchBtn.addEventListener('click', generateBatchPasswords);
            elements.copyAllBtn.addEventListener('click', copyAllPasswords);
            elements.exportBatchBtn.addEventListener('click', exportBatchPasswords);
            elements.exportTxt.addEventListener('click', () => exportPassword('txt'));
            elements.exportPdf.addEventListener('click', () => exportPassword('pdf'));
            elements.passwordOptionsBtn.addEventListener('click', showPasswordOptions);

            [elements.uppercase, elements.lowercase, elements.numbers, elements.symbols]
                .forEach(checkbox => checkbox.addEventListener('change', validateCheckboxes));

            elements.tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    elements.tabs.forEach(t => t.classList.remove('active'));
                    elements.tabContents.forEach(tc => tc.classList.remove('active'));
                    tab.classList.add('active');
                    document.getElementById(tab.dataset.tab).classList.add('active');
                });
            });

            document.addEventListener('keydown', e => {
                if (e.key === 'Enter' && !['INPUT', 'TEXTAREA'].includes(document.activeElement.tagName)) {
                    generatePassword();
                }
                if (e.key === 'c' && e.ctrlKey && (document.activeElement === elements.passwordOutput || !['INPUT', 'TEXTAREA'].includes(document.activeElement.tagName))) {
                    copyToClipboard();
                    e.preventDefault();
                }
                if (e.key === 'k' && e.altKey) {
                    showKeyboardShortcuts();
                    e.preventDefault();
                }
            });

            window.addEventListener('beforeunload', savePreferences);
        }

        // Setup accordions
        function setupAccordions() {
            document.querySelectorAll('.accordion').forEach(accordion => {
                accordion.addEventListener('click', function() {
                    this.classList.toggle('active');
                    const panel = this.nextElementSibling;
                    panel.style.maxHeight = panel.style.maxHeight ? null : `${panel.scrollHeight}px`;
                });
            });
        }

        // Update length value display
        function updateLengthValue() {
            const value = elements.lengthSlider.value;
            elements.lengthValue.textContent = `${value} characters`;
            savePreferences();
        }

        // Validate checkboxes
        function validateCheckboxes() {
            if (!elements.uppercase.checked && !elements.lowercase.checked && 
                !elements.numbers.checked && !elements.symbols.checked) {
                elements.lowercase.checked = true;
                showToast("At least one character type must be selected");
            }
            savePreferences();
        }

        // Generate password
        function generatePassword() {
            try {
                const length = parseInt(elements.lengthSlider.value);
                let password = elements.textBasedEnabled.checked && elements.textInput.value.trim()
                    ? generateTextBasedPassword(elements.textInput.value, length)
                    : generateRandomPassword(length);

                elements.passwordOutput.value = password;
                elements.characterCount.textContent = `${password.length} characters`;
                updatePasswordStrength(password);
                updatePasswordRules(password);
                addToHistory(password);
                printPasswordDetails(password);

                elements.passwordOutput.classList.add('generate-animation');
                setTimeout(() => elements.passwordOutput.classList.remove('generate-animation'), 300);
            } catch (error) {
                console.error('Password generation error:', error);
                showToast('Failed to generate password');
            }
        }

        // Generate random password
        function generateRandomPassword(length) {
            let charset = '';
            if (elements.uppercase.checked) charset += charSets.uppercase;
            if (elements.lowercase.checked) charset += charSets.lowercase;
            if (elements.numbers.checked) charset += charSets.numbers;
            if (elements.symbols.checked) charset += charSets.symbols;

            if (!charset) {
                charset = charSets.lowercase;
                elements.lowercase.checked = true;
                showToast("At least one character type must be selected");
            }

            let password = '';
            let isValid = false;
            let attempts = 0;
            const maxAttempts = 100;

            while (!isValid && attempts < maxAttempts) {
                password = Array.from({ length }, () => 
                    charset.charAt(Math.floor(Math.random() * charset.length))
                ).join('');
                isValid = validatePassword(password);
                attempts++;
            }

            if (attempts >= maxAttempts) {
                showToast("Could not meet all constraints. Some restrictions relaxed.");
            }

            return password;
        }

        // Generate text-based password
        function generateTextBasedPassword(baseText, targetLength) {
            let password = baseText;
            const replacements = {
                'a': '@', 'e': '3', 'i': '!', 'o': '0', 's': '$', 't': '+'
            };

            Object.entries(replacements).forEach(([char, replacement]) => {
                password = password.replace(new RegExp(char, 'gi'), () => 
                    Math.random() > 0.5 ? char : replacement
                );
            });

            password = password.split('').map(char => 
                /[a-zA-Z]/.test(char) && Math.random() > 0.5 ? char.toUpperCase() : char
            ).join('');

            const availableSets = Object.entries(charSets).filter(([key]) => 
                elements[key].checked
            ).map(([, chars]) => chars);

            if (!availableSets.length) availableSets.push(charSets.lowercase);

            while (password.length < targetLength) {
                const randomSet = availableSets[Math.floor(Math.random() * availableSets.length)];
                password += randomSet.charAt(Math.floor(Math.random() * randomSet.length));
            }

            if (password.length > targetLength) {
                password = password.slice(0, targetLength);
            }

            let isValid = validatePassword(password);
            let attempts = 0;
            while (!isValid && attempts < 50) {
                password = shuffleString(password);
                isValid = validatePassword(password);
                attempts++;
            }

            return password;
        }

        // Shuffle string
        function shuffleString(str) {
            const arr = str.split('');
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr.join('');
        }

        // Validate password
        function validatePassword(password) {
            if (elements.noSequential.checked) {
                const sequentialPatterns = [
                    /012|123|234|345|456|567|678|789/,
                    /abc|bcd|cde|def|efg|fgh|ghi|hij|ijk|jkl|klm|lmn|mno|nop|opq|pqr|rst|stu|tuv|uvw|vwx|wxy|xyz/i
                ];
                if (sequentialPatterns.some(pattern => pattern.test(password))) return false;
            }

            if (elements.noRepeated.checked) {
                for (let i = 0; i < password.length - 1; i++) {
                    if (password[i] === password[i + 1]) return false;
                }
            }

            return !checkForCommonPatterns(password);
        }

        // Update password strength
        function updatePasswordStrength(password) {
            const analysis = analyzePassword(password);
            const strength = analysis.strength;

            elements.strengthFill.style.width = `${strength}%`;
            const strengthLevels = [
                { max: 40, color: 'weak', text: 'Weak' },
                { max: 70, color: 'moderate', text: 'Moderate' },
                { max: 90, color: 'strong', text: 'Strong' },
                { max: 100, color: 'super-strong', text: 'Super Strong' }
            ];

            const level = strengthLevels.find(l => strength <= l.max);
            elements.strengthFill.style.backgroundColor = `var(--${level.color})`;
            elements.strengthText.textContent = level.text;
            elements.strengthText.style.color = `var(--${level.color})`;

            updateCrackTime(password);
        }

        // Update crack time
        function updateCrackTime(password) {
            const possibleChars = calculatePossibleCharacters(password);
            const combinations = Math.pow(possibleChars, password.length);
            const secondsToCrack = combinations / 1e9;

            const timeUnits = [
                { limit: 60, unit: 'instantly', factor: 1 },
                { limit: 3600, unit: 'minutes', factor: 60 },
                { limit: 86400, unit: 'hours', factor: 3600 },
                { limit: 31536000, unit: 'days', factor: 86400 },
                { limit: 3153600000, unit: 'years', factor: 31536000 },
                { limit: Infinity, unit: 'centuries', factor: 3153600000 }
            ];

            const { unit, factor } = timeUnits.find(u => secondsToCrack < u.limit);
            elements.crackTime.textContent = unit === 'instantly'
                ? 'Cracked instantly'
                : `Cracked in ${Math.round(secondsToCrack / factor)} ${unit}`;
        }

        // Calculate possible characters
        function calculatePossibleCharacters(password) {
            let count = 0;
            if (/[a-z]/.test(password)) count += 26;
            if (/[A-Z]/.test(password)) count += 26;
            if (/[0-9]/.test(password)) count += 10;
            if (/[^a-zA-Z0-9]/.test(password)) count += 33;
            return Math.max(count, 26);
        }

        // Update password rules
        function updatePasswordRules(password) {
            const rules = [
                { id: 'rule1', test: password.length >= 6 },
                { id: 'rule2', test: /[a-z]/.test(password) && /[A-Z]/.test(password) },
                { id: 'rule3', test: /[0-9]/.test(password) },
                { id: 'rule4', test: /[^A-Za-z0-9]/.test(password) }
            ];

            rules.forEach(rule => {
                document.getElementById(rule.id).classList.toggle('rule-failed', !rule.test);
            });
        }

        // Copy to clipboard
        function copyToClipboard() {
            if (!elements.passwordOutput.value) {
                showToast("Generate a password first");
                return;
            }

            navigator.clipboard.writeText(elements.passwordOutput.value)
                .then(() => showToast("Password copied to clipboard"))
                .catch(() => showToast("Failed to copy password"));
        }

        // Show toast notification
        function showToast(message) {
            const toast = elements.toast;
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // Toggle theme
        function toggleTheme() {
            document.body.classList.toggle('light-mode');
            const isLightMode = document.body.classList.contains('light-mode');
            elements.themeIcon.textContent = isLightMode ? '‚òÄÔ∏è' : 'üåô';
            elements.themeText.textContent = isLightMode ? 'Dark Mode' : 'Light Mode';
            localStorage.setItem('darkMode', isLightMode ? 'light' : 'dark');
        }

        // Add to history
        function addToHistory(password) {
            state.passwordHistory.unshift({
                password,
                timestamp: new Date().toISOString(),
                strength: elements.strengthText.textContent,
                settings: {
                    length: elements.lengthSlider.value,
                    uppercase: elements.uppercase.checked,
                    lowercase: elements.lowercase.checked,
                    numbers: elements.numbers.checked,
                    symbols: elements.symbols.checked,
                    noSequential: elements.noSequential.checked,
                    noRepeated: elements.noRepeated.checked
                }
            });

            if (state.passwordHistory.length > 20) {
                state.passwordHistory.pop();
            }

            localStorage.setItem('passwordHistory', JSON.stringify(state.passwordHistory));
            updatePasswordHistoryDisplay();
        }

        // Update password history display
        function updatePasswordHistoryDisplay(query = '') {
            elements.passwordHistory.innerHTML = '';
            const filteredHistory = query
                ? state.passwordHistory.filter(entry => entry.password.toLowerCase().includes(query.toLowerCase()))
                : state.passwordHistory;

            if (!filteredHistory.length) {
                elements.passwordHistory.innerHTML = '<div class="history-empty">No passwords found.</div>';
                return;
            }

            filteredHistory.forEach((entry, index) => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';

                const passwordEl = document.createElement('div');
                passwordEl.className = 'history-password';
                passwordEl.textContent = entry.password;

                const metaEl = document.createElement('div');
                metaEl.className = 'history-meta';
                const date = new Date(entry.timestamp);
                metaEl.innerHTML = `<span>${entry.strength}</span><span>${date.toLocaleString()}</span>`;

                const actionsEl = document.createElement('div');
                actionsEl.className = 'history-actions';

                const copyBtn = document.createElement('button');
                copyBtn.className = 'history-btn tooltip';
                copyBtn.innerHTML = 'üìã<span class="tooltip-text">Copy password</span>';
                copyBtn.addEventListener('click', () => {
                    navigator.clipboard.writeText(entry.password);
                    showToast("Password copied to clipboard");
                });

                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'history-btn tooltip';
                deleteBtn.innerHTML = 'üóëÔ∏è<span class="tooltip-text">Delete</span>';
                deleteBtn.addEventListener('click', () => {
                    state.passwordHistory.splice(index, 1);
                    localStorage.setItem('passwordHistory', JSON.stringify(state.passwordHistory));
                    updatePasswordHistoryDisplay(query);
                    showToast("Password removed from history");
                });

                actionsEl.appendChild(copyBtn);
                actionsEl.appendChild(deleteBtn);
                historyItem.appendChild(passwordEl);
                historyItem.appendChild(metaEl);
                historyItem.appendChild(actionsEl);
                elements.passwordHistory.appendChild(historyItem);
            });
        }

        // Clear history
        function clearHistory() {
            state.passwordHistory = [];
            localStorage.setItem('passwordHistory', JSON.stringify(state.passwordHistory));
            updatePasswordHistoryDisplay();
            showToast("Password history cleared");
        }

        // Check password strength
        function checkPasswordStrength() {
            const password = elements.checkPassword.value.trim();
            if (!password) {
                showToast("Please enter a password to check");
                return;
            }

            elements.checkStrengthMeter.style.display = 'block';
            const analysis = analyzePassword(password);
            elements.checkStrengthFill.style.width = `${analysis.strength}%`;

            const strengthLevels = [
                { max: 40, color: 'weak', text: 'Weak Password' },
                { max: 70, color: 'moderate', text: 'Moderate Password' },
                { max: 90, color: 'strong', text: 'Strong Password' },
                { max: 100, color: 'super-strong', text: 'Super Strong Password' }
            ];

            const level = strengthLevels.find(l => analysis.strength <= l.max);
            elements.checkStrengthFill.style.backgroundColor = `var(--${level.color})`;
            elements.checkStrengthText.textContent = level.text;
            elements.checkStrengthText.style.color = `var(--${level.color})`;

            const possibleChars = calculatePossibleCharacters(password);
            const combinations = Math.pow(possibleChars, password.length);
            const secondsToCrack = combinations / 1e9;

            const timeUnits = [
                { limit: 60, unit: 'instantly', factor: 1 },
                { limit: 3600, unit: 'minutes', factor: 60 },
                { limit: 86400, unit: 'hours', factor: 3600 },
                { limit: 31536000, unit: 'days', factor: 86400 },
                { limit: 3153600000, unit: 'years', factor: 31536000 },
                { limit: Infinity, unit: 'centuries', factor: 3153600000 }
            ];

            const { unit, factor } = timeUnits.find(u => secondsToCrack < u.limit);
            elements.checkCrackTime.textContent = unit === 'instantly'
                ? 'Would be cracked instantly'
                : `Would be cracked in ${Math.round(secondsToCrack / factor)} ${unit}`;

            elements.strengthSuggestions.innerHTML = analysis.feedback.length
                ? analysis.feedback.map(f => `‚Ä¢ ${f}`).join('<br>')
                : 'Excellent password!';
        }

        // Generate batch passwords
        function generateBatchPasswords() {
            const count = parseInt(elements.batchCount.value);
            if (count < 1 || count > 50) {
                showToast("Please enter a number between 1 and 50");
                return;
            }

            elements.batchResults.innerHTML = '';
            const batchPasswords = [];

            for (let i = 0; i < count; i++) {
                const password = generateRandomPassword(parseInt(elements.lengthSlider.value));
                batchPasswords.push(password);

                const passwordEl = document.createElement('div');
                passwordEl.className = 'history-item';

                const passText = document.createElement('div');
                passText.className = 'history-password';
                passText.textContent = password;

                const copyBtn = document.createElement('button');
                copyBtn.className = 'history-btn tooltip';
                copyBtn.innerHTML = 'üìã<span class="tooltip-text">Copy password</span>';
                copyBtn.style.position = 'absolute';
                copyBtn.style.top = '0.5rem';
                copyBtn.style.right = '0.5rem';
                copyBtn.addEventListener('click', () => {
                    navigator.clipboard.writeText(password);
                    showToast("Password copied to clipboard");
                });

                passwordEl.appendChild(passText);
                passwordEl.appendChild(copyBtn);
                elements.batchResults.appendChild(passwordEl);
            }

            elements.copyAllBtn.style.display = 'inline-block';
            elements.exportBatchBtn.style.display = 'inline-block';
            elements.batchResults.dataset.passwords = JSON.stringify(batchPasswords);
        }

        // Copy all passwords
        function copyAllPasswords() {
            const passwords = JSON.parse(elements.batchResults.dataset.passwords || '[]');
            if (!passwords.length) {
                showToast("No passwords generated");
                return;
            }

            navigator.clipboard.writeText(passwords.join('\n'))
                .then(() => showToast("All passwords copied to clipboard"))
                .catch(() => showToast("Failed to copy passwords"));
        }

        // Export batch passwords
        function exportBatchPasswords() {
            const passwords = JSON.parse(elements.batchResults.dataset.passwords || '[]');
            if (!passwords.length) {
                showToast("No passwords generated");
                return;
            }

            const content = [
                "BATCH PASSWORDS",
                `Generated: ${new Date().toLocaleString()}`,
                "",
                ...passwords.map((pass, i) => `${i + 1}. ${pass}`),
                "",
                "Generated with UnifyX Password Generator"
            ].join('\n');

            const element = document.createElement('a');
            element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(content));
            element.setAttribute('download', 'batch_passwords.txt');
            element.style.display = 'none';
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
            showToast("Passwords exported successfully");
        }

        // Export single password
        function exportPassword(type) {
            const password = elements.passwordOutput.value;
            if (!password) {
                showToast("Generate a password first");
                return;
            }

            const settings = {
                length: elements.lengthSlider.value,
                uppercase: elements.uppercase.checked,
                lowercase: elements.lowercase.checked,
                numbers: elements.numbers.checked,
                symbols: elements.symbols.checked,
                noSequential: elements.noSequential.checked,
                noRepeated: elements.noRepeated.checked
            };

            if (type === 'txt') {
                const content = [
                    "SECURE PASSWORD",
                    `Generated: ${new Date().toLocaleString()}`,
                    "",
                    `Password: ${password}`,
                    "",
                    "Settings used:",
                    `- Length: ${settings.length} characters`,
                    `- Uppercase letters: ${settings.uppercase ? "Yes" : "No"}`,
                    `- Lowercase letters: ${settings.lowercase ? "Yes" : "No"}`,
                    `- Numbers: ${settings.numbers ? "Yes" : "No"}`,
                    `- Special characters: ${settings.symbols ? "Yes" : "No"}`,
                    `- No sequential characters: ${settings.noSequential ? "Yes" : "No"}`,
                    `- No repeated characters: ${settings.noRepeated ? "Yes" : "No"}`,
                    "",
                    `Strength: ${elements.strengthText.textContent}`,
                    `Estimated crack time: ${elements.crackTime.textContent}`,
                    "",
                    "Generated with UnifyX Password Generator"
                ].join('\n');

                const element = document.createElement('a');
                element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(content));
                element.setAttribute('download', 'secure_password.txt');
                element.style.display = 'none';
                document.body.appendChild(element);
                element.click();
                document.body.removeChild(element);
                showToast("Password exported as TXT");
            } else if (type === 'pdf') {
                const doc = new jsPDF();
                doc.setFontSize(12);
                let y = 20;

                [
                    "SECURE PASSWORD",
                    `Generated: ${new Date().toLocaleString()}`,
                    "",
                    `Password: ${password}`,
                    "",
                    "Settings used:",
                    `- Length: ${settings.length} characters`,
                    `- Uppercase letters: ${settings.uppercase ? "Yes" : "No"}`,
                    `- Lowercase letters: ${settings.lowercase ? "Yes" : "No"}`,
                    `- Numbers: ${settings.numbers ? "Yes" : "No"}`,
                    `- Special characters: ${settings.symbols ? "Yes" : "No"}`,
                    `- No sequential characters: ${settings.noSequential ? "Yes" : "No"}`,
                    `- No repeated characters: ${settings.noRepeated ? "Yes" : "No"}`,
                    "",
                    `Strength: ${elements.strengthText.textContent}`,
                    `Estimated crack time: ${elements.crackTime.textContent}`,
                    "",
                    "Generated with UnifyX Password Generator"
                ].forEach(line => {
                    doc.text(line, 20, y);
                    y += 10;
                });

                doc.save('secure_password.pdf');
                showToast("Password exported as PDF");
            }
        }

        // Calculate entropy
        function calculateEntropy(password) {
            let charSetSize = 0;
            if (/[a-z]/.test(password)) charSetSize += 26;
            if (/[A-Z]/.test(password)) charSetSize += 26;
            if (/[0-9]/.test(password)) charSetSize += 10;
            if (/[^a-zA-Z0-9]/.test(password)) charSetSize += 33;
            return Math.log2(Math.pow(charSetSize, password.length));
        }

        // Check for common patterns
        function checkForCommonPatterns(password) {
            const commonPatterns = [
                /^12345/, /password/i, /qwerty/i, /asdf/i, /admin/i,
                /welcome/i, /letmein/i, /monkey/i, /login/i, /abc123/i
            ];

            if (commonPatterns.some(pattern => pattern.test(password))) return true;
            if (/19\d\d|20\d\d/.test(password)) return true;

            const keyboardPatterns = ['qwerty', 'asdfgh', 'zxcvbnm', '123456', '!@#$%^'];
            const lowercasePassword = password.toLowerCase();
            return keyboardPatterns.some(pattern => lowercasePassword.includes(pattern));
        }

        // Analyze password
        function analyzePassword(password) {
            const analysis = {
                strength: 0,
                feedback: [],
                hasCommonPattern: false,
                entropy: 0
            };

            if (password.length < 8) {
                analysis.feedback.push("Password is too short (minimum 8 characters)");
            } else if (password.length >= 16) {
                analysis.feedback.push("Good length (16+ characters)");
            }

            const hasLower = /[a-z]/.test(password);
            const hasUpper = /[A-Z]/.test(password);
            const hasDigit = /\d/.test(password);
            const hasSpecial = /[^a-zA-Z0-9]/.test(password);
            const charClassCount = [hasLower, hasUpper, hasDigit, hasSpecial].filter(Boolean).length;

            if (charClassCount < 3) {
                analysis.feedback.push("Add more variety (uppercase, lowercase, numbers, symbols)");
            } else if (charClassCount >= 4) {
                analysis.feedback.push("Good character variety");
            }

            analysis.hasCommonPattern = checkForCommonPatterns(password);
            if (analysis.hasCommonPattern) {
                analysis.feedback.push("Avoid common patterns");
            }

            analysis.entropy = calculateEntropy(password);

            let strength = Math.min(1, password.length / 20) * 40 + (charClassCount / 4) * 40;
            if (analysis.hasCommonPattern) strength = Math.max(0, strength - 20);
            if (analysis.entropy > 80) strength = Math.min(100, strength + 10);
            else if (analysis.entropy > 60) strength = Math.min(100, strength + 5);

            analysis.strength = Math.round(strength);
            return analysis;
        }

        // Generate pronounceable password
        function generatePronounceablePassword(length) {
            const vowels = 'aeiouy';
            const consonants = 'bcdfghjklmnpqrstvwxz';
            const symbols = '!@#$%&*?';
            const numbers = '0123456789';

            let password = '';
            let i = 0;

            while (password.length < length) {
                if (i % 2 === 0) {
                    password += consonants.charAt(Math.floor(Math.random() * consonants.length));
                    if (password.length < length) {
                        password += vowels.charAt(Math.floor(Math.random() * vowels.length));
                    }
                } else if (Math.random() > 0.7) {
                    password += Math.random() > 0.5
                        ? numbers.charAt(Math.floor(Math.random() * numbers.length))
                        : symbols.charAt(Math.floor(Math.random() * symbols.length));
                } else {
                    let c = consonants.charAt(Math.floor(Math.random() * consonants.length));
                    if (Math.random() > 0.5) c = c.toUpperCase();
                    password += c;
                    if (password.length < length) {
                        password += vowels.charAt(Math.floor(Math.random() * vowels.length));
                    }
                }
                i++;
            }

            return password.substring(0, length);
        }

        // Find patterns
        function findPatterns(password) {
            const patterns = [];
            const repeatingChars = password.match(/(.)\1{2,}/g);
            if (repeatingChars) patterns.push(`Repeating characters: ${repeatingChars.join(', ')}`);

            const sequences = ['01234567890', 'abcdefghijklmnopqrstuvwxyz', 'qwertyuiop', 'asdfghjkl', 'zxcvbnm'];
            const lowercasePassword = password.toLowerCase();

            sequences.forEach(seq => {
                for (let i = 0; i < seq.length - 2; i++) {
                    const pattern = seq.substring(i, i + 3);
                    if (lowercasePassword.includes(pattern)) {
                        patterns.push(`Sequential pattern: ${pattern}`);
                        break;
                    }
                }
            });

            const yearMatch = password.match(/(19|20)\d{2}/);
            if (yearMatch) patterns.push(`Possible year: ${yearMatch[0]}`);

            return patterns;
        }

        // Print password details
        function printPasswordDetails(password) {
            console.group('Password Analysis');
            console.log('Password:', password);
            console.log('Length:', password.length);
            console.log('Entropy:', calculateEntropy(password).toFixed(2), 'bits');
            const charTypes = Object.keys(charSets).filter(type => new RegExp(charSets[type]).test(password));
            console.log('Character types:', charTypes.join(', '));
            console.log('Patterns found:', findPatterns(password).join(', ') || 'None');
            console.groupEnd();
        }

        // Generate password options
        function generatePasswordOptions() {
            const length = parseInt(elements.lengthSlider.value);
            return [
                {
                    name: 'Standard',
                    password: generateRandomPassword(length),
                    description: 'Completely random characters'
                },
                {
                    name: 'Pronounceable',
                    password: generatePronounceablePassword(length),
                    description: 'Easier to remember'
                },
                ...(elements.textInput.value.trim() ? [{
                    name: 'Word-based',
                    password: generateTextBasedPassword(elements.textInput.value, length),
                    description: 'Based on your input text'
                }] : [])
            ];
        }

        // Show password options
        function showPasswordOptions() {
            const modal = document.createElement('div');
            modal.className = 'modal';
            const modalContent = document.createElement('div');
            modalContent.className = 'modal-content';

            const closeBtn = document.createElement('button');
            closeBtn.className = 'modal-close';
            closeBtn.textContent = '√ó';
            closeBtn.onclick = () => document.body.removeChild(modal);

            const heading = document.createElement('h2');
            heading.textContent = 'Password Options';

            modalContent.appendChild(closeBtn);
            modalContent.appendChild(heading);

            generatePasswordOptions().forEach(option => {
                const optionCard = document.createElement('div');
                optionCard.style.padding = '1rem';
                optionCard.style.marginBottom = '1rem';
                optionCard.style.backgroundColor = 'var(--surface-light)';
                optionCard.style.borderRadius = '8px';

                optionCard.innerHTML = `
                    <div style="font-weight: bold; margin-bottom: 0.5rem;">${option.name}</div>
                    <div style="font-family: monospace; padding: 0.5rem; background-color: var(--input-bg); border-radius: 4px; word-break: break-all;">${option.password}</div>
                    <div style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.5rem;">${option.description}</div>
                `;

                const useBtn = document.createElement('button');
                useBtn.textContent = 'Use This Password';
                useBtn.className = 'btn btn-secondary';
                useBtn.onclick = () => {
                    elements.passwordOutput.value = option.password;
                    elements.characterCount.textContent = `${option.password.length} characters`;
                    updatePasswordStrength(option.password);
                    updatePasswordRules(option.password);
                    addToHistory(option.password);
                    document.body.removeChild(modal);
                };

                optionCard.appendChild(useBtn);
                modalContent.appendChild(optionCard);
            });

            modal.appendChild(modalContent);
            document.body.appendChild(modal);

            document.addEventListener('keydown', function escHandler(e) {
                if (e.key === 'Escape') {
                    document.body.removeChild(modal);
                    document.removeEventListener('keydown', escHandler);
                }
            });
        }

        // Show keyboard shortcuts
        function showKeyboardShortcuts() {
            const modal = document.createElement('div');
            modal.className = 'modal';
            const modalContent = document.createElement('div');
            modalContent.className = 'modal-content';

            const closeBtn = document.createElement('button');
            closeBtn.className = 'modal-close';
            closeBtn.textContent = '√ó';
            closeBtn.onclick = () => document.body.removeChild(modal);

            const heading = document.createElement('h2');
            heading.textContent = 'Keyboard Shortcuts';

            const shortcutsList = document.createElement('ul');
            shortcutsList.style.listStyleType = 'none';
            shortcutsList.style.padding = '0';

            [
                { key: 'Enter', action: 'Generate new password' },
                { key: 'Ctrl + C', action: 'Copy password to clipboard' },
                { key: 'Alt + K', action: 'Show this shortcuts menu' },
                { key: 'Esc', action: 'Close active dialog' }
            ].forEach(shortcut => {
                shortcutsList.innerHTML += `
                    <li style="margin-bottom: 0.5rem; display: flex; justify-content: space-between;">
                        <span style="background-color: var(--surface-light); padding: 0.25rem 0.5rem; border-radius: 4px; font-family: monospace;">${shortcut.key}</span>
                        <span>${shortcut.action}</span>
                    </li>
                `;
            });

            modalContent.appendChild(closeBtn);
            modalContent.appendChild(heading);
            modalContent.appendChild(shortcutsList);
            modal.appendChild(modalContent);
            document.body.appendChild(modal);

            document.addEventListener('keydown', function escHandler(e) {
                if (e.key === 'Escape') {
                    document.body.removeChild(modal);
                    document.removeEventListener('keydown', escHandler);
                }
            });
        }

        // Setup history search
        function setupHistorySearch() {
            const searchInput = document.createElement('input');
            searchInput.className = 'search-input';
            searchInput.placeholder = 'Search password history...';
            searchInput.addEventListener('input', () => updatePasswordHistoryDisplay(searchInput.value));
            elements.passwordHistory.prepend(searchInput);
        }

        // Initialize live preview
        function initializeLivePreview() {
            document.querySelectorAll('#settings input').forEach(input => {
                input.addEventListener('change', () => {
                    if (elements.passwordOutput.value) generatePassword();
                });
            });

            elements.lengthSlider.addEventListener('input', () => {
                updateLengthValue();
                if (elements.passwordOutput.value) generatePassword();
            });

            elements.textInput.addEventListener('input', () => {
                if (elements.textBasedEnabled.checked && elements.textInput.value.trim()) {
                    generatePassword();
                }
            });
        }

        // Save preferences
        function savePreferences() {
            state.preferences = {
                uppercase: elements.uppercase.checked,
                lowercase: elements.lowercase.checked,
                numbers: elements.numbers.checked,
                symbols: elements.symbols.checked,
                noSequential: elements.noSequential.checked,
                noRepeated: elements.noRepeated.checked
            };
            localStorage.setItem('passwordPreferences', JSON.stringify(state.preferences));
            localStorage.setItem('passwordLength', elements.lengthSlider.value);
        }

        // Initialize application
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>